!function(){"use strict";function i(){return this instanceof i?(this.topics=[],this.oId=0,void 0):new i}const a={is:function(a,b){return Object.prototype.toString.call(a).slice(8,-1)===b},areAll:function(a,b){for(var c=0,d=a.length;d>c;c++)if(!this.is(a[c],b))return!1;return!0}},b=function(a,b){var c,d=!1,e=function(){return d||(c=arguments),d=!0,this instanceof e?(this._constructor.apply(this,c),void 0):new e};e.prototype=b;for(var f in a)a.hasOwnProperty(f)&&(e.prototype[f]=a[f]);return e.prototype._constructor||(e.prototype._constructor=function(){}),e},c=function(a){setTimeout(a,0)},d={sub:function(){return"USAGE [ topic:String, object:Object, toCall:String ]"},pub:function(){return"UASGE [ topic:String, data:Array[Any...] ]"},unsub:function(){return"USAGE [topic:String, oId:Number]"},pubError:function(a,b){return'Failed to publish to obj on topic "'+a+'" ['+b.message+"]"},notAnObject:function(){return"argument to Bugle must be a literal object"}},e=function(a,b){return function(e){try{e.fn.apply(e.obj,b.length?b.concat(a):[a])}catch(f){c(function(){throw d.pubError(a,f)})}}},f=function(b){var f=this;if(a.is(b,"String")){var g=Array.prototype.slice.call(arguments,1);return c(function(){if(f.topics[b]){var a=f.topics[b],c=e(b,g);a.forEach(c)}}),!0}throw d.pub()},g=function(b,c,e){e=e?e:this;var f=a.is(b,"String"),g=a.is(e,"Object");if(f&&g)return this.topics[b]||(this.topics[b]=[]),this.topics[b].push({oId:++this.oId,obj:e,fn:c}),this.oId;throw d.sub()},h=function(b,e){var f=this,g=a.is(b,"String"),h=a.is(e,"Number");if(g&&h){var i=f.topics[b];return i?(c(function(){for(var a=i.length,b=0;a>b;b++)if(i[b].oId===e){i.splice(b,1);break}}),!0):!1}throw d.unsub()};i.prototype={pub:f,sub:g,unsub:h,extend:function(a){return b(a,this)}},window.Bugle={extend:function(b){if(b&&Object.keys(b).length){if(a.is(b,"Object"))return i().extend(b);throw d.notAnObject()}}}}();